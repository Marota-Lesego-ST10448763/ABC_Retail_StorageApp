@model ABC_Retail_StorageApp.Models.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Home";
}

<div class="text-center mb-5">
    <h1 class="display-4 text-dark-green">
        <i class="fas fa-leaf"></i> ABC Retailers!
    </h1>
    <p class="lead">Quality You Can Trust, Prices You’ll Love.</p>
    <p class="mt-3">
        Welcome to <strong>ABC Retailers</strong>, your trusted destination for quality products at unbeatable prices,our satisfaction is our priority.
    </p>
</div>

<!-- Action Buttons in 2x2 Grid -->
<div class="row mb-5 g-3">
    <!-- Row 1 -->
    <div class="col-md-6">
        <a asp-controller="Customer" asp-action="Index" class="btn btn-sage btn-lg w-100 py-4">
            <i class="fas fa-user-group fa-2x mb-2"></i><br />
            View Customers
            <small class="d-block">(@Model.CustomerCount total)</small>
        </a>
    </div>
    <div class="col-md-6">
        <a asp-controller="Product" asp-action="Index" class="btn btn-sage btn-lg w-100 py-4">
            <i class="fas fa-boxes-stacked fa-2x mb-2"></i><br />
            View Products
            <small class="d-block">(@Model.ProductCount total)</small>
        </a>
    </div>

    <!-- Row 2 -->
    <div class="col-md-6">
        <a asp-controller="Order" asp-action="Index" class="btn btn-sage btn-lg w-100 py-4">
            <i class="fas fa-bag-shopping fa-2x mb-2"></i><br />
            View Orders
            <small class="d-block">(@Model.OrderCount total)</small>
        </a>
    </div>
    <div class="col-md-6">
        <a asp-controller="Upload" asp-action="Index" class="btn btn-sage btn-lg w-100 py-4">
            <i class="fas fa-cloud-arrow-up fa-2x mb-2"></i><br />
            Upload Files
            <small class="d-block">(Payment proofs)</small>
        </a>
    </div>
</div>

<!-- Get Started Alert -->
@if (Model.CustomerCount == 0 && Model.ProductCount == 0 && Model.OrderCount == 0)
{
    <div class="alert alert-warning text-center rounded-3 shadow-sm">
        <h5><i class="fas fa-rocket"></i> Get Started</h5>
        <p>Welcome to ABC Retailers! You haven’t added any products, customers, or orders yet. Let’s get your store ready for business.</p>
        <form asp-action="InitializeStorage" method="post" class="d-inline">
            <button type="submit" class="btn btn-sage btn-lg shadow-sm">
                <i class="fas fa-cogs"></i> Initialize Store
            </button>
        </form>
    </div>
}

<!-- Top Picks Section -->
<div class="row mt-5">
    <div class="col-12">
        <h2 class="mb-4 text-center">
            <i class="fas fa-star text-warning"></i> Top Picks
        </h2>

        @if (Model.FeaturedProducts.Any())
        {
            <div class="row justify-content-center">
                @foreach (var product in Model.FeaturedProducts)
                {
                    <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-4">
                        <div class="card h-100 shadow-sm border-0 rounded-3 hover-scale">
                            <div class="position-relative">
                                @if (!string.IsNullOrEmpty(product.ImageUrl))
                                {
                                    <img src="@product.ImageUrl" class="card-img-top rounded-top" alt="@product.ProductName" style="height: 150px; object-fit: cover;">
                                }
                                else
                                {
                                    <div class="card-img-top bg-light d-flex align-items-center justify-content-center rounded-top" style="height: 150px;">
                                        <i class="fas fa-image fa-3x text-muted"></i>
                                    </div>
                                }

                                <!-- Top Pick Badge -->
                                <span class="position-absolute top-0 start-0 bg-warning text-dark px-2 py-1 rounded-end">
                                     Top Picks
                                </span>
                            </div>

                            <div class="card-body d-flex flex-column text-center">
                                <h6 class="card-title fw-bold">@product.ProductName</h6>
                                <p class="card-text text-muted small flex-grow-1">
                                    @(product.Description.Length > 50 ? product.Description.Substring(0, 50) + "..." : product.Description)
                                </p>
                                <p class="card-text text-success fw-bold mb-1">@product.Price.ToString("C")</p>
                                <small class="text-muted mb-2">Stock: @product.StockAvailable</small>
                                <a asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductID" class="btn btn-sage btn-sm mt-auto w-100">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="alert alert-info text-center">
                <i class="fas fa-info-circle"></i> No products available yet.
                <a asp-controller="Product" asp-action="Create" class="alert-link">Add your first product</a>!
            </div>
        }
    </div>
</div>

<style>
    /* Card hover effect */
    .hover-scale {
        transition: transform 0.2s, box-shadow 0.2s;
    }

        .hover-scale:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
</style>